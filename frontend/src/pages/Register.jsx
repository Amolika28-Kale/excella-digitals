import React, {useState} from 'react'; import API from '../api'; import { useNavigate, useSearchParams } from 'react-router-dom';
export default function Register(){ const [form, setForm] = useState({name:'', email:'', phone:'', password:''}); const [msg, setMsg] = useState(''); const navigate = useNavigate(); const [searchParams] = useSearchParams(); const ref = searchParams.get('ref') || null;
const submit = async e=>{ e.preventDefault(); try{ await API.post('/auth/register', {...form, referralCode: ref}); setMsg('Registered. Please login and pay â‚¹1200.'); navigate('/login'); }catch(err){ setMsg(err?.response?.data?.error || 'Error'); } };
return (<div><div className='header'><div className='font-semibold'>Register</div></div><div className='container'><div className='card max-w-md mx-auto'><form onSubmit={submit}><input className='input' placeholder='Name' value={form.name} onChange={e=>setForm({...form, name:e.target.value})} required /><input className='input' placeholder='Email' value={form.email} onChange={e=>setForm({...form, email:e.target.value})} required /><input className='input' placeholder='Phone' value={form.phone} onChange={e=>setForm({...form, phone:e.target.value})} /><input className='input' type='password' placeholder='Password' value={form.password} onChange={e=>setForm({...form, password:e.target.value})} required /><button className='btn' type='submit'>Register</button></form><p className='text-sm text-red-600 mt-2'>{msg}</p></div></div></div>) }
